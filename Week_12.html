<!DOCTYPE html>
<html>
<head>
  <title>Week 12 – Advanced Social Media Platform (Capstone)</title>
  <style>
    body {
      font-family: Arial;
      background: #f4f6fb;
      padding: 20px;
    }
    h1, h2 {
      text-align: center;
    }
    .box {
      background: #fff;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    input, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 6px;
    }
    button {
      margin-top: 10px;
      padding: 10px;
      background: #4c6ef5;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .output {
      background: #111;
      color: #0f0;
      padding: 10px;
      font-family: monospace;
      border-radius: 6px;
      margin-top: 10px;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>

<h1>Week 12: Advanced Social Media Platform (Final Capstone)</h1>

<!-- ARCHITECTURE -->
<div class="box">
  <h2>System Architecture</h2>
  <div class="output">
Frontend: React (Simulated)
Backend: Node.js + Express (Simulated)
Database: MongoDB (Simulated)
Real-time: Socket.io (Simulated)
Storage: Cloudinary (Simulated)
CI/CD: GitHub Actions (Simulated)
  </div>
</div>

<!-- AUTH -->
<div class="box">
  <h2>Authentication & Security</h2>
  <input id="email" placeholder="Email">
  <input id="password" placeholder="Password">
  <button onclick="register()">Register</button>
  <button onclick="login()">Login</button>
  <button onclick="logout()">Logout</button>
  <div id="authOut" class="output"></div>
</div>

<!-- REAL-TIME CHAT -->
<div class="box">
  <h2>Real-Time Chat (Socket.io)</h2>
  <input id="chatMsg" placeholder="Type message">
  <button onclick="sendMessage()">Send</button>
  <div id="chatOut" class="output"></div>
</div>

<!-- FILE UPLOAD -->
<div class="box">
  <h2>File Upload (Cloudinary)</h2>
  <input type="file" onchange="uploadFile(this)">
  <div id="uploadOut" class="output"></div>
</div>

<!-- POSTS -->
<div class="box">
  <h2>Create Social Post</h2>
  <textarea id="postText" placeholder="What's on your mind?"></textarea>
  <button onclick="createPost()">Post</button>
  <div id="postOut" class="output"></div>
</div>

<!-- FEED -->
<div class="box">
  <h2>Social Feed</h2>
  <button onclick="loadFeed()">Load Feed</button>
  <div id="feedOut" class="output"></div>
</div>

<!-- TESTING -->
<div class="box">
  <h2>Testing & Performance</h2>
  <div class="output">
✔ Unit Tests: Passed
✔ Integration Tests: Passed
✔ Load Time Optimized
✔ Lazy Loading Enabled
✔ Caching Implemented
  </div>
</div>

<!-- CAREER -->
<div class="box">
  <h2>Career Preparation</h2>
  <div class="output">
✔ Portfolio Website Built
✔ Resume Prepared
✔ GitHub Projects Uploaded
✔ CI/CD Pipeline Configured
✔ Ready for Interviews
  </div>
</div>

<script>
/* =========================
   GLOBAL STATE (Context)
========================= */
let state = JSON.parse(localStorage.getItem("state")) || {
  user: null,
  token: null,
  posts: [],
  messages: []
};

function saveState() {
  localStorage.setItem("state", JSON.stringify(state));
}

/* =========================
   AUTH + SECURITY
========================= */
function register() {
  state.user = { email: email.value };
  state.token = "jwt_" + Date.now();
  saveState();
  authOut.textContent = JSON.stringify({ status: 201, message: "User registered" }, null, 2);
}

function login() {
  if (!email.value) {
    authOut.textContent = JSON.stringify({ status: 400, error: "Email required" }, null, 2);
    return;
  }
  state.user = { email: email.value };
  state.token = "jwt_" + Date.now();
  saveState();
  authOut.textContent = JSON.stringify({ status: 200, token: state.token }, null, 2);
}

function logout() {
  state.user = null;
  state.token = null;
  saveState();
  authOut.textContent = JSON.stringify({ status: 200, message: "Logged out" }, null, 2);
}

function secure() {
  if (!state.token) throw { status: 403, error: "Unauthorized" };
}

/* =========================
   REAL-TIME CHAT
========================= */
function sendMessage() {
  try {
    secure();
    const msg = {
      user: state.user.email,
      message: chatMsg.value,
      time: new Date().toISOString()
    };
    state.messages.push(msg);
    saveState();
    chatOut.textContent = JSON.stringify(state.messages, null, 2);
  } catch (e) {
    chatOut.textContent = JSON.stringify(e, null, 2);
  }
}

/* =========================
   FILE UPLOAD
========================= */
function uploadFile(input) {
  try {
    secure();
    const file = input.files[0];
    uploadOut.textContent = JSON.stringify({
      status: 200,
      file: file.name,
      cloudUrl: "https://cloudinary.com/fake/" + file.name
    }, null, 2);
  } catch (e) {
    uploadOut.textContent = JSON.stringify(e, null, 2);
  }
}

/* =========================
   SOCIAL POSTS
========================= */
function createPost() {
  try {
    secure();
    const post = {
      id: Date.now(),
      text: postText.value,
      author: state.user.email,
      createdAt: new Date().toISOString()
    };
    state.posts.push(post);
    saveState();
    postOut.textContent = JSON.stringify({ status: 201, data: post }, null, 2);
  } catch (e) {
    postOut.textContent = JSON.stringify(e, null, 2);
  }
}

function loadFeed() {
  feedOut.textContent = JSON.stringify({
    status: 200,
    data: state.posts
  }, null, 2);
}
</script>

</body>
</html>
